# ðŸ§© Component Diagram

> Detailed breakdown of Terra Scout components and their relationships.

---

## ðŸ“¦ Agent Module Components (Python)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              agent/                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  src/                                                                       â”‚
â”‚  â”œâ”€â”€ __init__.py                                                            â”‚
â”‚  â”‚                                                                          â”‚
â”‚  â”œâ”€â”€ bridge/                     # Python-to-Bot communication              â”‚
â”‚  â”‚   â”œâ”€â”€ __init__.py                                                        â”‚
â”‚  â”‚   â”œâ”€â”€ client.py               # HTTP client for bot API                  â”‚
â”‚  â”‚   â”œâ”€â”€ environment.py          # TerraScoutEnv (Gymnasium)                â”‚
â”‚  â”‚   â”œâ”€â”€ observations.py         # Observation processor (35 features)      â”‚
â”‚  â”‚   â”œâ”€â”€ rewards.py              # Custom reward calculator                 â”‚
â”‚  â”‚   â””â”€â”€ actions.py              # Action space handling                    â”‚
â”‚  â”‚                                                                          â”‚
â”‚  â”œâ”€â”€ core/                                                                  â”‚
â”‚  â”‚   â””â”€â”€ __init__.py                                                        â”‚
â”‚  â”‚                                                                          â”‚
â”‚  â”œâ”€â”€ models/                                                                â”‚
â”‚  â”‚   â””â”€â”€ __init__.py             # (Uses SB3 built-in MLP)                  â”‚
â”‚  â”‚                                                                          â”‚
â”‚  â””â”€â”€ utils/                                                                 â”‚
â”‚      â”œâ”€â”€ __init__.py                                                        â”‚
â”‚      â””â”€â”€ logger.py               # Logging utilities                        â”‚
â”‚                                                                             â”‚
â”‚  configs/                                                                   â”‚
â”‚  â””â”€â”€ default.yaml                # Default configuration                    â”‚
â”‚                                                                             â”‚
â”‚  tests/                                                                     â”‚
â”‚  â”œâ”€â”€ test_bridge.py                                                         â”‚
â”‚  â””â”€â”€ test_gym_env.py                                                        â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ðŸ“¦ Training Module Components

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              training/                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  scripts/                                                                   â”‚
â”‚  â”œâ”€â”€ train.py                  # Main training entry point                  â”‚
â”‚  â”œâ”€â”€ evaluate.py               # Evaluation script                          â”‚
â”‚  â””â”€â”€ export_model.py           # Model export utilities                     â”‚
â”‚                                                                             â”‚
â”‚  configs/                                                                   â”‚
â”‚  â”œâ”€â”€ training_config.yaml      # Training hyperparameters                   â”‚
â”‚  â””â”€â”€ hyperparameters.yaml      # Model hyperparameters                      â”‚
â”‚                                                                             â”‚
â”‚  notebooks/                                                                 â”‚
â”‚  â”œâ”€â”€ train_kaggle.ipynb        # Kaggle training notebook                   â”‚
â”‚  â””â”€â”€ analysis.ipynb            # Results analysis                           â”‚
â”‚                                                                             â”‚
â”‚  checkpoints/                  # Saved model weights                        â”‚
â”‚  â”œâ”€â”€ .gitkeep                                                               â”‚
â”‚  â””â”€â”€ [model_epoch_X.pt]                                                     â”‚
â”‚                                                                             â”‚
â”‚  logs/                         # Training logs                              â”‚
â”‚  â”œâ”€â”€ .gitkeep                                                               â”‚
â”‚  â””â”€â”€ [tensorboard_logs/]                                                    â”‚
â”‚                                                                             â”‚
â”‚  experiments/                  # Experiment tracking                        â”‚
â”‚  â”œâ”€â”€ .gitkeep                                                               â”‚
â”‚  â””â”€â”€ [experiment_YYYYMMDD/]                                                 â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ðŸ“¦ Bot Module Components (Node.js)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              bot/                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  src/                                                                       â”‚
â”‚  â”œâ”€â”€ index.js                   # Entry point                               â”‚
â”‚  â”œâ”€â”€ server.js                  # Express.js HTTP server                    â”‚
â”‚  â”œâ”€â”€ bot.js                     # TerraScoutBot class (1000+ lines)         â”‚
â”‚  â”‚                                                                          â”‚
â”‚  â”œâ”€â”€ actions/                   # Bot action implementations                â”‚
â”‚  â”‚   â”œâ”€â”€ movement.js            # Basic movement (forward, back, jump)      â”‚
â”‚  â”‚   â”œâ”€â”€ mining.js              # Mining patterns (strip, branch, tunnel)   â”‚
â”‚  â”‚   â””â”€â”€ exploration.js         # Cave finding and exploration              â”‚
â”‚  â”‚                                                                          â”‚
â”‚  â”œâ”€â”€ observers/                 # Observation gathering                     â”‚
â”‚  â”‚   â”œâ”€â”€ blocks.js              # Nearby block detection                    â”‚
â”‚  â”‚   â”œâ”€â”€ inventory.js           # Inventory state                           â”‚
â”‚  â”‚   â””â”€â”€ environment.js         # Cave/danger detection                     â”‚
â”‚  â”‚                                                                          â”‚
â”‚  â””â”€â”€ utils/                                                                 â”‚
â”‚      â”œâ”€â”€ logger.js              # Colored console logging                   â”‚
â”‚      â””â”€â”€ config.js              # Bot configuration                         â”‚
â”‚                                                                             â”‚
â”‚  package.json                   # Dependencies: mineflayer, express, etc.   â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ðŸ“¦ Shared Module Components

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              shared/                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  __init__.py                                                                â”‚
â”‚                                                                             â”‚
â”‚  constants/                                                                 â”‚
â”‚  â”œâ”€â”€ __init__.py                                                            â”‚
â”‚  â”œâ”€â”€ minecraft.py              # Minecraft-specific constants               â”‚
â”‚  â”‚   â”œâ”€â”€ DIAMOND_Y_MIN         # Minimum Y for diamonds (-64)               â”‚
â”‚  â”‚   â”œâ”€â”€ DIAMOND_Y_MAX         # Maximum Y for diamonds (16)                â”‚
â”‚  â”‚   â”œâ”€â”€ BLOCK_IDS             # Block type identifiers                     â”‚
â”‚  â”‚   â””â”€â”€ ACTION_MAPPINGS       # Action name to ID mappings                 â”‚
â”‚  â”‚                                                                          â”‚
â”‚  â””â”€â”€ rewards.py                # Reward constants                           â”‚
â”‚      â”œâ”€â”€ DIAMOND_FOUND         # Reward for finding diamond                 â”‚
â”‚      â”œâ”€â”€ DEATH_PENALTY         # Penalty for dying                          â”‚
â”‚      â”œâ”€â”€ STEP_PENALTY          # Small penalty per step                     â”‚
â”‚      â””â”€â”€ EXPLORE_BONUS         # Bonus for new areas                        â”‚
â”‚                                                                             â”‚
â”‚  types/                                                                     â”‚
â”‚  â”œâ”€â”€ __init__.py                                                            â”‚
â”‚  â””â”€â”€ observations.py           # Type definitions for observations          â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ðŸ”— Component Relationships

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        COMPONENT RELATIONSHIPS                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                               â”‚
â”‚                           â”‚   train.py      â”‚                               â”‚
â”‚                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                               â”‚
â”‚                                    â”‚                                        â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚                    â”‚               â”‚               â”‚                        â”‚
â”‚                    â–¼               â–¼               â–¼                        â”‚
â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚           â”‚   config    â”‚  â”‚    agent    â”‚  â”‚  wrappers   â”‚                â”‚
â”‚           â”‚   loader    â”‚  â”‚    core     â”‚  â”‚             â”‚                â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                  â”‚                â”‚                â”‚                        â”‚
â”‚                  â”‚                â–¼                â”‚                        â”‚
â”‚                  â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚                        â”‚
â”‚                  â”‚       â”‚   models/   â”‚           â”‚                        â”‚
â”‚                  â”‚       â”‚  networks   â”‚           â”‚                        â”‚
â”‚                  â”‚       â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜           â”‚                        â”‚
â”‚                  â”‚              â”‚                  â”‚                        â”‚
â”‚                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â”‚                                 â”‚                                           â”‚
â”‚                                 â–¼                                           â”‚
â”‚                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                  â”‚
â”‚                        â”‚     shared/     â”‚                                  â”‚
â”‚                        â”‚   constants     â”‚                                  â”‚
â”‚                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                  â”‚
â”‚                                 â”‚                                           â”‚
â”‚                                 â–¼                                           â”‚
â”‚                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                  â”‚
â”‚                        â”‚     MineRL      â”‚                                  â”‚
â”‚                        â”‚   Environment   â”‚                                  â”‚
â”‚                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                  â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ðŸ“‹ Component Responsibility Matrix

| Component       | Creates         | Uses                    | Used By               |
| --------------- | --------------- | ----------------------- | --------------------- |
| `train.py`      | Training loop   | Agent, Config, Wrappers | Developer             |
| `agent.py`      | Agent instance  | Policy, Models          | train.py, evaluate.py |
| `policy.py`     | Policy logic    | Networks                | Agent                 |
| `networks.py`   | Neural nets     | PyTorch                 | Policy                |
| `wrappers.py`   | Env wrappers    | MineRL, Constants       | train.py              |
| `config.py`     | Config objects  | YAML files              | All modules           |
| `checkpoint.py` | Save/Load logic | PyTorch                 | Agent, train.py       |
| `constants/`    | Constants       | -                       | All modules           |

---

## ðŸ”Œ Interface Definitions

### Agent Interface

```python
class Agent:
    def __init__(self, config: Config) -> None: ...
    def select_action(self, observation: dict) -> dict: ...
    def update(self, experiences: List[Experience]) -> dict: ...
    def save(self, path: str) -> None: ...
    def load(self, path: str) -> None: ...
```

### Environment Wrapper Interface

```python
class TerraScoutEnvWrapper(gymnasium.Wrapper):
    def __init__(self, env: gymnasium.Env) -> None: ...
    def reset(self) -> Tuple[dict, dict]: ...
    def step(self, action: dict) -> Tuple[dict, float, bool, bool, dict]: ...
    def compute_reward(self, obs: dict, action: dict, next_obs: dict) -> float: ...
```

### Config Interface

```python
class Config:
    def __init__(self, path: str) -> None: ...
    def get(self, key: str, default: Any = None) -> Any: ...
    def to_dict(self) -> dict: ...
```

---

## ðŸ“Ž Related Documents

- [SYSTEM_OVERVIEW.md](SYSTEM_OVERVIEW.md)
- [DATA_FLOW.md](DATA_FLOW.md)
